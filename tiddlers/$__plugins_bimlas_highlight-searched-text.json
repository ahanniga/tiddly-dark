{
    "tiddlers": {
        "$:/plugins/bimlas/highlight-searched-text/README/CHANGELOG": {
            "title": "$:/plugins/bimlas/highlight-searched-text/README/CHANGELOG",
            "tags": "",
            "type": "text/vnd.tiddlywiki",
            "text": "I'm trying to follow the rules of [[Semantic Versioning|https://semver.org/]].\n\n!! 0.5.0 - 2021-03-26\n\n[[See GitLab for detailed change history of this release|https://gitlab.com/bimlas/tw5-highlight-searched-text/compare/v0.4.0...v0.5.0]]\n\n* Add option to disable automatic highlighting\n* Fixed a bug that could have caused RSOD in some cases\n* Hide toolbar on printing\n\n!! 0.4.0 - 2020-02-13\n\n[[See GitLab for detailed change history of this release|https://gitlab.com/bimlas/tw5-highlight-searched-text/compare/v0.3.2...v0.4.0]]\n\n* Add option to change toolbar height and position\n\n!! 0.3.2 - 2020-02-13\n\n[[See GitLab for detailed change history of this release|https://gitlab.com/bimlas/tw5-highlight-searched-text/compare/v0.3.1...0.3.2]]\n\n* Search was performed inside CodeMirror texteditor which caused RSOD\n\n!! 0.3.1 - 2019-11-19\n\n[[See GitLab for detailed change history of this release|https://gitlab.com/bimlas/tw5-highlight-searched-text/compare/v0.3.0...v0.3.1]]\n\n* The counter showed n-1 matches\n\n!! 0.3.0 - 2019-11-19\n\n[[See GitLab for detailed change history of this release|https://gitlab.com/bimlas/tw5-highlight-searched-text/compare/v0.2.0...v0.3.0]]\n\n* Add counter\n* Move templates to their own directory\n\n!! 0.2.0 - 2019-11-18\n\n[[See GitLab for detailed change history of this release|https://gitlab.com/bimlas/tw5-highlight-searched-text/compare/v0.1.1...v0.2.0]]\n\n* Add buttons and a toolbar to navigate between matches on page (\"find in page\" feature of browsers)\n\n!! 0.1.1 - 2019-11-12\n\n[[See GitLab for detailed change history of this release|https://gitlab.com/bimlas/tw5-highlight-searched-text/compare/v0.1.0...v0.1.1]]\n\n* Add option to change the title of the tiddler containing the search term\n\n!! 0.1.0 - 2019-11-11\n\n* First public release\n"
        },
        "$:/plugins/bimlas/highlight-searched-text/README/README": {
            "title": "$:/plugins/bimlas/highlight-searched-text/README/README",
            "tags": "",
            "type": "text/vnd.tiddlywiki",
            "text": "! Highlight searched text\n\nFor example, type `search text` in the standard search and select one of the results, or just click outside of it (to hide the popup list): each of ''the words you search for will be highlighted separately in the text of the tiddlers''.\n\nIn the sidebar above the standard search, there are \"Scroll to next / previous matches\" buttons to navigate through the results on the page. In the case of a narrow screen (or according to your preferences), a toolbar will appear at the bottom of the window where you can access the same functions.\n\nSince this doesn't require a \"Find in page\" browser, ''it is convenient to use on [[TiddlyDesktop|https://tiddlywiki.com/#TiddlyDesktop]] and Android'' (via [[Tiddloid|https://tiddlywiki.com/#Saving%20on%20Android]], [[Quinoid|https://github.com/Marxsal/Quinoid01]], etc).\n\nThe plugin uses the [[Mark.js library|https://markjs.io/]].\n\n* https://bimlas.gitlab.io/tw5-highlight-searched-text (demo + install)\n* https://gitlab.com/bimlas/tw5-highlight-searched-text (main repository)\n* https://github.com/bimlas/tw5-highlight-searched-text (mirror, ''please star if you like the plugin'')\n\n!! Known issues\n\nThe \"find-in-page\" feature does not work properly with [[JD's Material theme|http://j.d.material.tiddlyspot.com/]] because when you jump to the next hit, it will be aligned with the top of the page instead of the middle of the page.\n\nIf the text of a tiddler is wider than the story river, it will not align the \"find-in-page\" toolbar at the bottom of the screen, but more lower, so it will not be visible. For example, search for \"script\" in the Shadows tab of [[$:/AdvancedSearch]] and make your browser as narrow as possible: if you scroll down and up, you will understand what I mean. This is not a bug in the plugin, but in the TiddlyWiki (or rather in the browsers).\n\n!! Tips\n\n!!! Colorized icons\n\nTo colorize the next / previous icons, create a tiddler (name can be anything), add the <<tag \"$:/tags/Stylesheet\">> tag and copy the following code into it.\n\n```css\n.bimlas-highlight-searched-text.bimlas-sidebar .bimlas-next-match svg, .bimlas-highlight-searched-text.bimlas-sticky-find-in-page .bimlas-next-match svg {\n  fill: green;\n}\n.bimlas-highlight-searched-text.bimlas-sidebar .bimlas-previous-match svg, .bimlas-highlight-searched-text.bimlas-sticky-find-in-page .bimlas-previous-match svg {\n  fill: red;\n}\n```\n\n!! Installation instructions\n\nTo add the plugin to your own ~TiddlyWiki5, just drag this link to the browser window:\n\n$:/plugins/bimlas/highlight-searched-text\n\nFor other installation options see the repositories above.\n"
        },
        "$:/plugins/bimlas/highlight-searched-text/action-scroll-to-match.js": {
            "title": "$:/plugins/bimlas/highlight-searched-text/action-scroll-to-match.js",
            "text": "/*\\\ntitle: $:/plugins/bimlas/highlight-searched-text/action-scroll-to-match.js\ntype: application/javascript\nmodule-type: widget\n\nAction widget to scroll to the next match in story river.\n\n\\*/\n(function() {\n\n\t/*jslint node: false, browser: true */\n\t/*global $tw: true */\n\t\"use strict\";\n\n\tvar Widget = require(\"$:/core/modules/widgets/widget.js\").widget;\n\tvar updateHighlighting = require('$:/plugins/bimlas/highlight-searched-text/update-highlighting.js');\n\n\tvar ScrollToMatch = function(parseTreeNode,options) {\n\t\tthis.initialise(parseTreeNode,options);\n\t};\n\n\t/*\n\tInherit from the base widget class\n\t*/\n\tScrollToMatch.prototype = new Widget();\n\n\t/*\n\tRender this widget into the DOM\n\t*/\n\tScrollToMatch.prototype.render = function(parent,nextSibling) {\n\t\tthis.computeAttributes();\n\t\tthis.execute();\n\t};\n\n\t/*\n\tCompute the internal state of the widget\n\t*/\n\tScrollToMatch.prototype.execute = function() {\n\t\tthis.actionDirection = this.getAttribute(\"$direction\");\n\t};\n\n\t/*\n\tRefresh the widget by ensuring our attributes are up to date\n\t*/\n\tScrollToMatch.prototype.refresh = function(changedTiddlers) {\n\t\tvar changedAttributes = this.computeAttributes();\n\t\tif(changedAttributes[\"$direction\"]) {\n\t\t\tthis.refreshSelf();\n\t\t\treturn true;\n\t\t}\n\t\treturn this.refreshChildren(changedTiddlers);\n\t};\n\n\t/*\n\tInvoke the action associated with this widget\n\t*/\n\tScrollToMatch.prototype.invokeAction = function(triggeringWidget,event) {\n\t\tvar self = this;\n\t\tvar isHighlightingUpdated = updateHighlighting();\n\t\tvar allMatches = $tw.pageContainer.querySelectorAll('mark');\n\t\tif(allMatches.length === 0) return true;\n\t\tif(isHighlightingUpdated && resultsAreFoundOnTheCurrentScreen()) return true;\n\n\t\tvar targetMatch = this.actionDirection === \"previous\"\n\t\t\t? findBackwardFromThePreviousHalfScreen()\n\t\t\t: findForwardFromTheNextHalfScreen();\n\n\t\t$tw.pageScroller.scrollIntoView(targetMatch, function() {\n\t\t\treturn alignBoundingBoxToMiddleOfTheScreen(targetMatch.getBoundingClientRect());\n\t\t});\n\t\tthis.previousMatch = targetMatch;\n\t\treturn true; // Action was invoked\n\n\t\tfunction resultsAreFoundOnTheCurrentScreen() {\n\t\t\treturn [].slice.call(allMatches).reduce(function(accumulator,match) {\n\t\t\t\treturn accumulator || (getPositionOfElementRelativeToScreen(match) === 0);\n\t\t\t}, false);\n\t\t}\n\n\t\tfunction findBackwardFromThePreviousHalfScreen() {\n\t\t\tvar foundMatch;\n\t\t\tfor(var index = allMatches.length-1; index >= 0; index--) {\n\t\t\t\tif(getPositionOfElementRelativeToScreen(allMatches[index]) < 0) {\n\t\t\t\t\tfoundMatch = allMatches[index];\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn !foundMatch || (foundMatch === self.previousMatch) ? allMatches[allMatches.length-1] : foundMatch;\n\t\t}\n\n\t\tfunction findForwardFromTheNextHalfScreen() {\n\t\t\tvar foundMatch;\n\t\t\tfor(var index = 0; index < allMatches.length; index++) {\n\t\t\t\tif(getPositionOfElementRelativeToScreen(allMatches[index]) > 0) {\n\t\t\t\t\tfoundMatch = allMatches[index];\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn !foundMatch || (foundMatch === self.previousMatch) ? allMatches[0] : foundMatch;\n\t\t}\n\n\t\tfunction alignBoundingBoxToMiddleOfTheScreen(boundingBox) {\n\t\t\treturn {\n\t\t\t\tleft: boundingBox.left,\n\t\t\t\ttop: boundingBox.top - window.innerHeight/2,\n\t\t\t\twidth: boundingBox.width,\n\t\t\t\theight: boundingBox.height\n\t\t\t};\n\t\t}\n\n\t\tfunction getPositionOfElementRelativeToScreen(elem) {\n\t\t\tvar elementYOffset = elem.getBoundingClientRect().top;\n\t\t\tif (elementYOffset < window.innerHeight*0.25) return -1;\n\t\t\tif (elementYOffset > (window.innerHeight-30*window.devicePixelRatio/* height of the toolbar */)*0.75 ) return 1;\n\t\t\treturn 0;\n\t\t}\n\t};\n\n\texports[\"action-scroll-to-match\"] = ScrollToMatch;\n\n})();\n",
            "type": "application/javascript",
            "module-type": "widget"
        },
        "$:/plugins/bimlas/highlight-searched-text/buttons/clear-input": {
            "title": "$:/plugins/bimlas/highlight-searched-text/buttons/clear-input",
            "tags": "",
            "type": "text/vnd.tiddlywiki",
            "text": "<$button class=\"tc-btn-invisible bimlas-clear-input\" tooltip=\"Clear text input\" set={{$:/config/bimlas/highlight-searched-text/search-tiddler}} setTo=\"\">\n    {{$:/core/images/close-button}}\n</$button>\n"
        },
        "$:/plugins/bimlas/highlight-searched-text/buttons/hide-toolbar": {
            "title": "$:/plugins/bimlas/highlight-searched-text/buttons/hide-toolbar",
            "tags": "",
            "type": "text/vnd.tiddlywiki",
            "text": "<$button class=\"tc-btn-invisible bimlas-hide-toolbar\" tooltip=\"Hide this toolbar\" set=\"$:/state/bimlas/highlight-searched-text/toolbar\" setTo=\"hide\">\n    {{$:/core/images/advanced-search-button}}\n</$button>\n"
        },
        "$:/plugins/bimlas/highlight-searched-text/buttons/next-match": {
            "title": "$:/plugins/bimlas/highlight-searched-text/buttons/next-match",
            "tags": "",
            "type": "text/vnd.tiddlywiki",
            "text": "<$button class=\"tc-btn-invisible bimlas-next-match\" tooltip=\"Scroll to next matches\">\n    <$action-scroll-to-match $direction=\"next\"/>\n    {{$:/core/images/down-arrow}}\n</$button>\n"
        },
        "$:/plugins/bimlas/highlight-searched-text/buttons/previous-match": {
            "title": "$:/plugins/bimlas/highlight-searched-text/buttons/previous-match",
            "tags": "",
            "type": "text/vnd.tiddlywiki",
            "text": "<$button class=\"tc-btn-invisible bimlas-previous-match\" tooltip=\"Scroll to previous matches\">\n    <$action-scroll-to-match $direction=\"previous\"/>\n    {{$:/core/images/up-arrow}}\n</$button>\n"
        },
        "$:/plugins/bimlas/highlight-searched-text/buttons/show-toolbar": {
            "title": "$:/plugins/bimlas/highlight-searched-text/buttons/show-toolbar",
            "tags": "",
            "type": "text/vnd.tiddlywiki",
            "text": "<$button class=\"tc-btn-invisible bimlas-show-toolbar\" tooltip=\"Find in page\" set=\"$:/state/bimlas/highlight-searched-text/toolbar\" setTo=\"show\">\n    {{$:/core/images/advanced-search-button}}\n</$button>\n"
        },
        "$:/plugins/bimlas/highlight-searched-text/mark.js": {
            "title": "$:/plugins/bimlas/highlight-searched-text/mark.js",
            "text": "/*\\\ntitle: $:/plugins/bimlas/highlight-searched-text/mark.js\ntype: application/javascript\nmodule-type: library\n\n* mark.js v8.11.1\n* https://markjs.io/\n* Copyright (c) 2014–2018, Julian Kühnel\n* Released under the MIT license https://git.io/vwTVl\n\n\\*/\n\n!function(e,t){\"object\"==typeof exports&&\"undefined\"!=typeof module?module.exports=t():\"function\"==typeof define&&define.amd?define(t):e.Mark=t()}(this,function(){\"use strict\";var e=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&\"function\"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?\"symbol\":typeof e},t=function(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")},n=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,\"value\"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i=function(){function e(n){var r=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:5e3;t(this,e),this.ctx=n,this.iframes=r,this.exclude=i,this.iframesTimeout=o}return n(e,[{key:\"getContexts\",value:function(){var e=[];return(void 0!==this.ctx&&this.ctx?NodeList.prototype.isPrototypeOf(this.ctx)?Array.prototype.slice.call(this.ctx):Array.isArray(this.ctx)?this.ctx:\"string\"==typeof this.ctx?Array.prototype.slice.call(document.querySelectorAll(this.ctx)):[this.ctx]:[]).forEach(function(t){var n=e.filter(function(e){return e.contains(t)}).length>0;-1!==e.indexOf(t)||n||e.push(t)}),e}},{key:\"getIframeContents\",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){},r=void 0;try{var i=e.contentWindow;if(r=i.document,!i||!r)throw new Error(\"iframe inaccessible\")}catch(e){n()}r&&t(r)}},{key:\"isIframeBlank\",value:function(e){var t=e.getAttribute(\"src\").trim();return\"about:blank\"===e.contentWindow.location.href&&\"about:blank\"!==t&&t}},{key:\"observeIframeLoad\",value:function(e,t,n){var r=this,i=!1,o=null,a=function a(){if(!i){i=!0,clearTimeout(o);try{r.isIframeBlank(e)||(e.removeEventListener(\"load\",a),r.getIframeContents(e,t,n))}catch(e){n()}}};e.addEventListener(\"load\",a),o=setTimeout(a,this.iframesTimeout)}},{key:\"onIframeReady\",value:function(e,t,n){try{\"complete\"===e.contentWindow.document.readyState?this.isIframeBlank(e)?this.observeIframeLoad(e,t,n):this.getIframeContents(e,t,n):this.observeIframeLoad(e,t,n)}catch(e){n()}}},{key:\"waitForIframes\",value:function(e,t){var n=this,r=0;this.forEachIframe(e,function(){return!0},function(e){r++,n.waitForIframes(e.querySelector(\"html\"),function(){--r||t()})},function(e){e||t()})}},{key:\"forEachIframe\",value:function(t,n,r){var i=this,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:function(){},a=t.querySelectorAll(\"iframe\"),s=a.length,c=0;a=Array.prototype.slice.call(a);var u=function(){--s<=0&&o(c)};s||u(),a.forEach(function(t){e.matches(t,i.exclude)?u():i.onIframeReady(t,function(e){n(t)&&(c++,r(e)),u()},u)})}},{key:\"createIterator\",value:function(e,t,n){return document.createNodeIterator(e,t,n,!1)}},{key:\"createInstanceOnIframe\",value:function(t){return new e(t.querySelector(\"html\"),this.iframes)}},{key:\"compareNodeIframe\",value:function(e,t,n){if(e.compareDocumentPosition(n)&Node.DOCUMENT_POSITION_PRECEDING){if(null===t)return!0;if(t.compareDocumentPosition(n)&Node.DOCUMENT_POSITION_FOLLOWING)return!0}return!1}},{key:\"getIteratorNode\",value:function(e){var t=e.previousNode();return{prevNode:t,node:null===t?e.nextNode():e.nextNode()&&e.nextNode()}}},{key:\"checkIframeFilter\",value:function(e,t,n,r){var i=!1,o=!1;return r.forEach(function(e,t){e.val===n&&(i=t,o=e.handled)}),this.compareNodeIframe(e,t,n)?(!1!==i||o?!1===i||o||(r[i].handled=!0):r.push({val:n,handled:!0}),!0):(!1===i&&r.push({val:n,handled:!1}),!1)}},{key:\"handleOpenIframes\",value:function(e,t,n,r){var i=this;e.forEach(function(e){e.handled||i.getIframeContents(e.val,function(e){i.createInstanceOnIframe(e).forEachNode(t,n,r)})})}},{key:\"iterateThroughNodes\",value:function(e,t,n,r,i){for(var o,a=this,s=this.createIterator(t,e,r),c=[],u=[],l=void 0,h=void 0;void 0,o=a.getIteratorNode(s),h=o.prevNode,l=o.node;)this.iframes&&this.forEachIframe(t,function(e){return a.checkIframeFilter(l,h,e,c)},function(t){a.createInstanceOnIframe(t).forEachNode(e,function(e){return u.push(e)},r)}),u.push(l);u.forEach(function(e){n(e)}),this.iframes&&this.handleOpenIframes(c,e,n,r),i()}},{key:\"forEachNode\",value:function(e,t,n){var r=this,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:function(){},o=this.getContexts(),a=o.length;a||i(),o.forEach(function(o){var s=function(){r.iterateThroughNodes(e,o,t,n,function(){--a<=0&&i()})};r.iframes?r.waitForIframes(o,s):s()})}}],[{key:\"matches\",value:function(e,t){var n=\"string\"==typeof t?[t]:t,r=e.matches||e.matchesSelector||e.msMatchesSelector||e.mozMatchesSelector||e.oMatchesSelector||e.webkitMatchesSelector;if(r){var i=!1;return n.every(function(t){return!r.call(e,t)||(i=!0,!1)}),i}return!1}}]),e}(),o=function(){function o(e){t(this,o),this.ctx=e,this.ie=!1;var n=window.navigator.userAgent;(n.indexOf(\"MSIE\")>-1||n.indexOf(\"Trident\")>-1)&&(this.ie=!0)}return n(o,[{key:\"log\",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:\"debug\",r=this.opt.log;this.opt.debug&&\"object\"===(void 0===r?\"undefined\":e(r))&&\"function\"==typeof r[n]&&r[n](\"mark.js: \"+t)}},{key:\"escapeStr\",value:function(e){return e.replace(/[\\-\\[\\]\\/\\{\\}\\(\\)\\*\\+\\?\\.\\\\\\^\\$\\|]/g,\"\\\\$&\")}},{key:\"createRegExp\",value:function(e){return\"disabled\"!==this.opt.wildcards&&(e=this.setupWildcardsRegExp(e)),e=this.escapeStr(e),Object.keys(this.opt.synonyms).length&&(e=this.createSynonymsRegExp(e)),(this.opt.ignoreJoiners||this.opt.ignorePunctuation.length)&&(e=this.setupIgnoreJoinersRegExp(e)),this.opt.diacritics&&(e=this.createDiacriticsRegExp(e)),e=this.createMergedBlanksRegExp(e),(this.opt.ignoreJoiners||this.opt.ignorePunctuation.length)&&(e=this.createJoinersRegExp(e)),\"disabled\"!==this.opt.wildcards&&(e=this.createWildcardsRegExp(e)),e=this.createAccuracyRegExp(e)}},{key:\"createSynonymsRegExp\",value:function(e){var t=this.opt.synonyms,n=this.opt.caseSensitive?\"\":\"i\",r=this.opt.ignoreJoiners||this.opt.ignorePunctuation.length?\"\\0\":\"\";for(var i in t)if(t.hasOwnProperty(i)){var o=t[i],a=\"disabled\"!==this.opt.wildcards?this.setupWildcardsRegExp(i):this.escapeStr(i),s=\"disabled\"!==this.opt.wildcards?this.setupWildcardsRegExp(o):this.escapeStr(o);\"\"!==a&&\"\"!==s&&(e=e.replace(new RegExp(\"(\"+this.escapeStr(a)+\"|\"+this.escapeStr(s)+\")\",\"gm\"+n),r+\"(\"+this.processSynomyms(a)+\"|\"+this.processSynomyms(s)+\")\"+r))}return e}},{key:\"processSynomyms\",value:function(e){return(this.opt.ignoreJoiners||this.opt.ignorePunctuation.length)&&(e=this.setupIgnoreJoinersRegExp(e)),e}},{key:\"setupWildcardsRegExp\",value:function(e){return(e=e.replace(/(?:\\\\)*\\?/g,function(e){return\"\\\\\"===e.charAt(0)?\"?\":\"\u0001\"})).replace(/(?:\\\\)*\\*/g,function(e){return\"\\\\\"===e.charAt(0)?\"*\":\"\u0002\"})}},{key:\"createWildcardsRegExp\",value:function(e){var t=\"withSpaces\"===this.opt.wildcards;return e.replace(/\\u0001/g,t?\"[\\\\S\\\\s]?\":\"\\\\S?\").replace(/\\u0002/g,t?\"[\\\\S\\\\s]*?\":\"\\\\S*\")}},{key:\"setupIgnoreJoinersRegExp\",value:function(e){return e.replace(/[^(|)\\\\]/g,function(e,t,n){var r=n.charAt(t+1);return/[(|)\\\\]/.test(r)||\"\"===r?e:e+\"\\0\"})}},{key:\"createJoinersRegExp\",value:function(e){var t=[],n=this.opt.ignorePunctuation;return Array.isArray(n)&&n.length&&t.push(this.escapeStr(n.join(\"\"))),this.opt.ignoreJoiners&&t.push(\"\\\\u00ad\\\\u200b\\\\u200c\\\\u200d\"),t.length?e.split(/\\u0000+/).join(\"[\"+t.join(\"\")+\"]*\"):e}},{key:\"createDiacriticsRegExp\",value:function(e){var t=this.opt.caseSensitive?\"\":\"i\",n=this.opt.caseSensitive?[\"aàáảãạăằắẳẵặâầấẩẫậäåāą\",\"AÀÁẢÃẠĂẰẮẲẴẶÂẦẤẨẪẬÄÅĀĄ\",\"cçćč\",\"CÇĆČ\",\"dđď\",\"DĐĎ\",\"eèéẻẽẹêềếểễệëěēę\",\"EÈÉẺẼẸÊỀẾỂỄỆËĚĒĘ\",\"iìíỉĩịîïī\",\"IÌÍỈĨỊÎÏĪ\",\"lł\",\"LŁ\",\"nñňń\",\"NÑŇŃ\",\"oòóỏõọôồốổỗộơởỡớờợöøō\",\"OÒÓỎÕỌÔỒỐỔỖỘƠỞỠỚỜỢÖØŌ\",\"rř\",\"RŘ\",\"sšśșş\",\"SŠŚȘŞ\",\"tťțţ\",\"TŤȚŢ\",\"uùúủũụưừứửữựûüůū\",\"UÙÚỦŨỤƯỪỨỬỮỰÛÜŮŪ\",\"yýỳỷỹỵÿ\",\"YÝỲỶỸỴŸ\",\"zžżź\",\"ZŽŻŹ\"]:[\"aàáảãạăằắẳẵặâầấẩẫậäåāąAÀÁẢÃẠĂẰẮẲẴẶÂẦẤẨẪẬÄÅĀĄ\",\"cçćčCÇĆČ\",\"dđďDĐĎ\",\"eèéẻẽẹêềếểễệëěēęEÈÉẺẼẸÊỀẾỂỄỆËĚĒĘ\",\"iìíỉĩịîïīIÌÍỈĨỊÎÏĪ\",\"lłLŁ\",\"nñňńNÑŇŃ\",\"oòóỏõọôồốổỗộơởỡớờợöøōOÒÓỎÕỌÔỒỐỔỖỘƠỞỠỚỜỢÖØŌ\",\"rřRŘ\",\"sšśșşSŠŚȘŞ\",\"tťțţTŤȚŢ\",\"uùúủũụưừứửữựûüůūUÙÚỦŨỤƯỪỨỬỮỰÛÜŮŪ\",\"yýỳỷỹỵÿYÝỲỶỸỴŸ\",\"zžżźZŽŻŹ\"],r=[];return e.split(\"\").forEach(function(i){n.every(function(n){if(-1!==n.indexOf(i)){if(r.indexOf(n)>-1)return!1;e=e.replace(new RegExp(\"[\"+n+\"]\",\"gm\"+t),\"[\"+n+\"]\"),r.push(n)}return!0})}),e}},{key:\"createMergedBlanksRegExp\",value:function(e){return e.replace(/[\\s]+/gim,\"[\\\\s]+\")}},{key:\"createAccuracyRegExp\",value:function(e){var t=this,n=this.opt.accuracy,r=\"string\"==typeof n?n:n.value,i=\"\";switch((\"string\"==typeof n?[]:n.limiters).forEach(function(e){i+=\"|\"+t.escapeStr(e)}),r){case\"partially\":default:return\"()(\"+e+\")\";case\"complementary\":return\"()([^\"+(i=\"\\\\s\"+(i||this.escapeStr(\"!\\\"#$%&'()*+,-./:;<=>?@[\\\\]^_`{|}~¡¿\")))+\"]*\"+e+\"[^\"+i+\"]*)\";case\"exactly\":return\"(^|\\\\s\"+i+\")(\"+e+\")(?=$|\\\\s\"+i+\")\"}}},{key:\"getSeparatedKeywords\",value:function(e){var t=this,n=[];return e.forEach(function(e){t.opt.separateWordSearch?e.split(\" \").forEach(function(e){e.trim()&&-1===n.indexOf(e)&&n.push(e)}):e.trim()&&-1===n.indexOf(e)&&n.push(e)}),{keywords:n.sort(function(e,t){return t.length-e.length}),length:n.length}}},{key:\"isNumeric\",value:function(e){return Number(parseFloat(e))==e}},{key:\"checkRanges\",value:function(e){var t=this;if(!Array.isArray(e)||\"[object Object]\"!==Object.prototype.toString.call(e[0]))return this.log(\"markRanges() will only accept an array of objects\"),this.opt.noMatch(e),[];var n=[],r=0;return e.sort(function(e,t){return e.start-t.start}).forEach(function(e){var i=t.callNoMatchOnInvalidRanges(e,r),o=i.start,a=i.end;i.valid&&(e.start=o,e.length=a-o,n.push(e),r=a)}),n}},{key:\"callNoMatchOnInvalidRanges\",value:function(e,t){var n=void 0,r=void 0,i=!1;return e&&void 0!==e.start?(r=(n=parseInt(e.start,10))+parseInt(e.length,10),this.isNumeric(e.start)&&this.isNumeric(e.length)&&r-t>0&&r-n>0?i=!0:(this.log(\"Ignoring invalid or overlapping range: \"+JSON.stringify(e)),this.opt.noMatch(e))):(this.log(\"Ignoring invalid range: \"+JSON.stringify(e)),this.opt.noMatch(e)),{start:n,end:r,valid:i}}},{key:\"checkWhitespaceRanges\",value:function(e,t,n){var r=void 0,i=!0,o=n.length,a=t-o,s=parseInt(e.start,10)-a;return(r=(s=s>o?o:s)+parseInt(e.length,10))>o&&(r=o,this.log(\"End range automatically set to the max value of \"+o)),s<0||r-s<0||s>o||r>o?(i=!1,this.log(\"Invalid range: \"+JSON.stringify(e)),this.opt.noMatch(e)):\"\"===n.substring(s,r).replace(/\\s+/g,\"\")&&(i=!1,this.log(\"Skipping whitespace only range: \"+JSON.stringify(e)),this.opt.noMatch(e)),{start:s,end:r,valid:i}}},{key:\"getTextNodes\",value:function(e){var t=this,n=\"\",r=[];this.iterator.forEachNode(NodeFilter.SHOW_TEXT,function(e){r.push({start:n.length,end:(n+=e.textContent).length,node:e})},function(e){return t.matchesExclude(e.parentNode)?NodeFilter.FILTER_REJECT:NodeFilter.FILTER_ACCEPT},function(){e({value:n,nodes:r})})}},{key:\"matchesExclude\",value:function(e){return i.matches(e,this.opt.exclude.concat([\"script\",\"style\",\"title\",\"head\",\"html\"]))}},{key:\"wrapRangeInTextNode\",value:function(e,t,n){var r=this.opt.element?this.opt.element:\"mark\",i=e.splitText(t),o=i.splitText(n-t),a=document.createElement(r);return a.setAttribute(\"data-markjs\",\"true\"),this.opt.className&&a.setAttribute(\"class\",this.opt.className),a.textContent=i.textContent,i.parentNode.replaceChild(a,i),o}},{key:\"wrapRangeInMappedTextNode\",value:function(e,t,n,r,i){var o=this;e.nodes.every(function(a,s){var c=e.nodes[s+1];if(void 0===c||c.start>t){if(!r(a.node))return!1;var u=t-a.start,l=(n>a.end?a.end:n)-a.start,h=e.value.substr(0,a.start),f=e.value.substr(l+a.start);if(a.node=o.wrapRangeInTextNode(a.node,u,l),e.value=h+f,e.nodes.forEach(function(t,n){n>=s&&(e.nodes[n].start>0&&n!==s&&(e.nodes[n].start-=l),e.nodes[n].end-=l)}),n-=l,i(a.node.previousSibling,a.start),!(n>a.end))return!1;t=a.end}return!0})}},{key:\"wrapMatches\",value:function(e,t,n,r,i){var o=this,a=0===t?0:t+1;this.getTextNodes(function(t){t.nodes.forEach(function(t){t=t.node;for(var i=void 0;null!==(i=e.exec(t.textContent))&&\"\"!==i[a];)if(n(i[a],t)){var s=i.index;if(0!==a)for(var c=1;c<a;c++)s+=i[c].length;t=o.wrapRangeInTextNode(t,s,s+i[a].length),r(t.previousSibling),e.lastIndex=0}}),i()})}},{key:\"wrapMatchesAcrossElements\",value:function(e,t,n,r,i){var o=this,a=0===t?0:t+1;this.getTextNodes(function(t){for(var s=void 0;null!==(s=e.exec(t.value))&&\"\"!==s[a];){var c=s.index;if(0!==a)for(var u=1;u<a;u++)c+=s[u].length;var l=c+s[a].length;o.wrapRangeInMappedTextNode(t,c,l,function(e){return n(s[a],e)},function(t,n){e.lastIndex=n,r(t)})}i()})}},{key:\"wrapRangeFromIndex\",value:function(e,t,n,r){var i=this;this.getTextNodes(function(o){var a=o.value.length;e.forEach(function(e,r){var s=i.checkWhitespaceRanges(e,a,o.value),c=s.start,u=s.end;s.valid&&i.wrapRangeInMappedTextNode(o,c,u,function(n){return t(n,e,o.value.substring(c,u),r)},function(t){n(t,e)})}),r()})}},{key:\"unwrapMatches\",value:function(e){for(var t=e.parentNode,n=document.createDocumentFragment();e.firstChild;)n.appendChild(e.removeChild(e.firstChild));t.replaceChild(n,e),this.ie?this.normalizeTextNode(t):t.normalize()}},{key:\"normalizeTextNode\",value:function(e){if(e){if(3===e.nodeType)for(;e.nextSibling&&3===e.nextSibling.nodeType;)e.nodeValue+=e.nextSibling.nodeValue,e.parentNode.removeChild(e.nextSibling);else this.normalizeTextNode(e.firstChild);this.normalizeTextNode(e.nextSibling)}}},{key:\"markRegExp\",value:function(e,t){var n=this;this.opt=t,this.log('Searching with expression \"'+e+'\"');var r=0,i=\"wrapMatches\";this.opt.acrossElements&&(i=\"wrapMatchesAcrossElements\"),this[i](e,this.opt.ignoreGroups,function(e,t){return n.opt.filter(t,e,r)},function(e){r++,n.opt.each(e)},function(){0===r&&n.opt.noMatch(e),n.opt.done(r)})}},{key:\"mark\",value:function(e,t){var n=this;this.opt=t;var r=0,i=\"wrapMatches\",o=this.getSeparatedKeywords(\"string\"==typeof e?[e]:e),a=o.keywords,s=o.length,c=this.opt.caseSensitive?\"\":\"i\";this.opt.acrossElements&&(i=\"wrapMatchesAcrossElements\"),0===s?this.opt.done(r):function e(t){var o=new RegExp(n.createRegExp(t),\"gm\"+c),u=0;n.log('Searching with expression \"'+o+'\"'),n[i](o,1,function(e,i){return n.opt.filter(i,t,r,u)},function(e){u++,r++,n.opt.each(e)},function(){0===u&&n.opt.noMatch(t),a[s-1]===t?n.opt.done(r):e(a[a.indexOf(t)+1])})}(a[0])}},{key:\"markRanges\",value:function(e,t){var n=this;this.opt=t;var r=0,i=this.checkRanges(e);i&&i.length?(this.log(\"Starting to mark with the following ranges: \"+JSON.stringify(i)),this.wrapRangeFromIndex(i,function(e,t,r,i){return n.opt.filter(e,t,r,i)},function(e,t){r++,n.opt.each(e,t)},function(){n.opt.done(r)})):this.opt.done(r)}},{key:\"unmark\",value:function(e){var t=this;this.opt=e;var n=this.opt.element?this.opt.element:\"*\";n+=\"[data-markjs]\",this.opt.className&&(n+=\".\"+this.opt.className),this.log('Removal selector \"'+n+'\"'),this.iterator.forEachNode(NodeFilter.SHOW_ELEMENT,function(e){t.unwrapMatches(e)},function(e){var r=i.matches(e,n),o=t.matchesExclude(e);return!r||o?NodeFilter.FILTER_REJECT:NodeFilter.FILTER_ACCEPT},this.opt.done)}},{key:\"opt\",set:function(e){this._opt=r({},{element:\"\",className:\"\",exclude:[],iframes:!1,iframesTimeout:5e3,separateWordSearch:!0,diacritics:!0,synonyms:{},accuracy:\"partially\",acrossElements:!1,caseSensitive:!1,ignoreJoiners:!1,ignoreGroups:0,ignorePunctuation:[],wildcards:\"disabled\",each:function(){},noMatch:function(){},filter:function(){return!0},done:function(){},debug:!1,log:window.console},e)},get:function(){return this._opt}},{key:\"iterator\",get:function(){return new i(this.ctx,this.opt.iframes,this.opt.exclude,this.opt.iframesTimeout)}}]),o}();return function(e){var t=this,n=new o(e);return this.mark=function(e,r){return n.mark(e,r),t},this.markRegExp=function(e,r){return n.markRegExp(e,r),t},this.markRanges=function(e,r){return n.markRanges(e,r),t},this.unmark=function(e){return n.unmark(e),t},this}});\n",
            "type": "application/javascript",
            "module-type": "library"
        },
        "$:/plugins/bimlas/highlight-searched-text/settings/SETTINGS": {
            "title": "$:/plugins/bimlas/highlight-searched-text/settings/SETTINGS",
            "tags": "",
            "type": "text/vnd.tiddlywiki",
            "text": "! Settings\n\n!! The system tiddler used for searching\n\nThe plugin works basically with standard search, but if you use a theme or a plugin that stores the term you are looking for elsewhere, you can specify the appropriate tiddler here.\n\n<$edit-text tiddler=\"$:/config/bimlas/highlight-searched-text/search-tiddler\" tag=\"input\"/>\n\nTo find the tiddler that stores the search string, make a search for `find-my-search-tiddler` in your standard search field (e.g. in the sidebar). The tiddler will be shown bellow.\n\n<<list-links filter:\"[all[tiddlers]search[find-my-search-tiddler]] -[all[current]]\">>\n\n!! Toolbar visibility\n\nIn a narrow browser or smartphone, the sidebar appears at the top of the page, so we can't conveniently use the search box there to search within the page. To fix this, we have a toolbar (magnifying glass icon in the corner of the window). If you wish, you can turn this off or make it visible in wider browsers (it can also be useful if, for example, your theme hides the sidebar).\n\n<$radio tiddler=\"$:/config/bimlas/highlight-searched-text/toolbar-visibility\" value=\"never\"> Never </$radio>\n\n<$radio tiddler=\"$:/config/bimlas/highlight-searched-text/toolbar-visibility\" value=\"smallscreen\"> Only on small screens </$radio>\n\n<$radio tiddler=\"$:/config/bimlas/highlight-searched-text/toolbar-visibility\" value=\"allways\"> Allways </$radio>\n\nHeight: <$edit-text tiddler=\"$:/config/bimlas/highlight-searched-text/toolbar-height\" tag=\"input\"/>\n\nOffset from bottom: <$edit-text tiddler=\"$:/config/bimlas/highlight-searched-text/toolbar-offset\" tag=\"input\"/>\n\n//To display it at the top of the page, use the following formula://\n\n```\ncalc(100% - {{$:/config/bimlas/highlight-searched-text/toolbar-height}})\n```\n\n!! Auto highlight\n\nIf you want the highlight to be performed only when you click the \"Go to next / previous matches\" buttons, turn off this option.\n\n<$checkbox tiddler=\"$:/config/bimlas/highlight-searched-text/auto-highlight\" field=\"text\" checked=\"yes\" unchecked=\"no\"> Automatically highlight matches </$checkbox>\n"
        },
        "$:/config/bimlas/highlight-searched-text/auto-highlight": {
            "title": "$:/config/bimlas/highlight-searched-text/auto-highlight",
            "tags": "",
            "type": "text/vnd.tiddlywiki",
            "text": "yes"
        },
        "$:/config/bimlas/highlight-searched-text/search-tiddler": {
            "title": "$:/config/bimlas/highlight-searched-text/search-tiddler",
            "tags": "",
            "type": "text/vnd.tiddlywiki",
            "text": "$:/temp/search"
        },
        "$:/config/bimlas/highlight-searched-text/toolbar-height": {
            "title": "$:/config/bimlas/highlight-searched-text/toolbar-height",
            "tags": "",
            "type": "text/vnd.tiddlywiki",
            "text": "30px"
        },
        "$:/config/bimlas/highlight-searched-text/toolbar-offset": {
            "title": "$:/config/bimlas/highlight-searched-text/toolbar-offset",
            "tags": "",
            "type": "text/vnd.tiddlywiki",
            "text": "0px"
        },
        "$:/config/bimlas/highlight-searched-text/toolbar-visibility": {
            "title": "$:/config/bimlas/highlight-searched-text/toolbar-visibility",
            "tags": "",
            "type": "text/vnd.tiddlywiki",
            "text": "smallscreen"
        },
        "$:/plugins/bimlas/highlight-searched-text/startup-action.js": {
            "title": "$:/plugins/bimlas/highlight-searched-text/startup-action.js",
            "text": "/*\\\ntitle: $:/plugins/bimlas/highlight-searched-text/startup-action.js\ntype: application/javascript\nmodule-type: startup\n\nAdd event listeners to highlight searched text\n\n\\*/\n\n(function() {\n\n\t/*jslint node: false, browser: true */\n\t/*global $tw: true */\n\t\"use strict\";\n\n\tvar updateHighlighting = require('$:/plugins/bimlas/highlight-searched-text/update-highlighting.js');\n\n\t// Export name and synchronous status\n\texports.name = \"highlightsearch\";\n\texports.platforms = [\"browser\"];\n\texports.after = [\"story\"];\n\texports.synchronous = true;\n\n\texports.startup = function() {\n\t\t$tw.wiki.addEventListener(\"change\",function(changedTiddlers) {\n\t\t\tif(Object.keys(changedTiddlers).reduce(function(accumulator,current) {\n\t\t\t\treturn accumulator || searchTextBecameEmpty(current) || (autoHighlightEnabled() && searchPopupBecameHidden(current,changedTiddlers[current]))\n\t\t\t},false)) {\n\t\t\t\tupdateHighlighting();\n\t\t\t}\n\t\t});\n\t\t$tw.hooks.addHook(\"th-navigating\",function(event) {\n\t\t\tif(autoHighlightEnabled()) {\n\t\t\t  // TODO: It should update highlight only if navigated from search results - how to check this?\n\t\t\t  setTimeout(function() {\n\t\t\t    updateHighlighting(true);\n\t\t\t  }, $tw.wiki.getTiddlerText(\"$:/config/AnimationDuration\"));\n\t\t    }\n\t\t\treturn (event);\n\t\t});\n\t\t$tw.hooks.addHook(\"th-editing-tiddler\",function(event) {\n\t\t\tclearHighlighting();\n\t\t\treturn (event);\n\t\t});\n\t\t$tw.hooks.addHook(\"th-new-tiddler\",function(event) {\n\t\t\tclearHighlighting();\n\t\t\treturn (event);\n\t\t});\n\t};\n\n\tfunction autoHighlightEnabled() {\n\t\treturn $tw.wiki.getTiddlerText(\"$:/config/bimlas/highlight-searched-text/auto-highlight\") === \"yes\";\n\t}\n\n\tfunction searchPopupBecameHidden(title,value) {\n\t\treturn (title.indexOf(\"$:/state/popup/search-dropdown\") === 0) && value.deleted\n\t}\n\n\tfunction searchTextBecameEmpty(title) {\n\t\tvar searchTiddler = $tw.wiki.getTiddlerText(\"$:/config/bimlas/highlight-searched-text/search-tiddler\");\n\t\treturn title === searchTiddler && $tw.wiki.getTiddlerText(searchTiddler) === \"\"\n\t}\n\n\tfunction clearHighlighting() {\n\t\tsetTimeout(function() {\n\t\t\tupdateHighlighting(true, \"\");\n\t\t}, $tw.wiki.getTiddlerText(\"$:/config/AnimationDuration\"));\n\t}\n})();\n",
            "type": "application/javascript",
            "module-type": "startup"
        },
        "$:/plugins/bimlas/highlight-searched-text/stylesheet": {
            "title": "$:/plugins/bimlas/highlight-searched-text/stylesheet",
            "tags": "$:/tags/Stylesheet",
            "type": "",
            "text": ".bimlas-highlight-searched-text.bimlas-sticky-find-in-page {\n    display: -webkit-flex;\n    display: flex;\n    align-items: center;\n    position: fixed;\n    bottom: {{$:/config/bimlas/highlight-searched-text/toolbar-offset}};\n    /*\n      Aligned to the right it disappears when eg. the search results in\n      $:/AdvancedSearch have such a long filename that the page becomes wider\n      than the screen.\n    */\n    left: 0;\n    z-index: 500;\n    height: {{$:/config/bimlas/highlight-searched-text/toolbar-height}};\n    font-size: calc({{$:/config/bimlas/highlight-searched-text/toolbar-height}} * 18 / 30);\n    padding: 0;\n    background-color: <<colour tiddler-background>>;\n    border: 1px solid <<colour tiddler-border>>;\n    border-radius: 1em;\n    <<box-shadow \"1px 1px 5px rgba(0, 0, 0, 0.3)\">>\n}\n\n.bimlas-highlight-searched-text .bimlas-counter {\n    white-space: nowrap;\n}\n\n.bimlas-highlight-searched-text.bimlas-sticky-find-in-page > * {\n    padding: 0 0.25em;\n}\n\n.bimlas-highlight-searched-text.bimlas-sticky-find-in-page input {\n    width: 100%;\n}\n\n.bimlas-highlight-searched-text.bimlas-sticky-find-in-page button {\n    flex: 0 0 {{$:/config/bimlas/highlight-searched-text/toolbar-height}};\n}\n\n<$list filter=\"[[$:/state/bimlas/highlight-searched-text/toolbar]contains:text[show]]\">\n    .bimlas-highlight-searched-text.bimlas-sticky-find-in-page {\n        width: 100vw;\n        /* Without this, the scrollbar would overlap the last button */\n        padding-right: 15px;\n        border-radius: 0;\n    }\n</$list>\n\n<$list filter=\"[[$:/config/bimlas/highlight-searched-text/toolbar-visibility]contains:text[smallscreen]]\">\n    @media (min-width: {{$:/themes/tiddlywiki/vanilla/metrics/sidebarbreakpoint}}) {\n        .bimlas-highlight-searched-text.bimlas-sticky-find-in-page {\n            display: none;\n        }\n    }\n</$list>\n\n@media print {\n    .bimlas-highlight-searched-text {\n        display: none !important;\n    }\n}"
        },
        "$:/plugins/bimlas/highlight-searched-text/templates/counter": {
            "title": "$:/plugins/bimlas/highlight-searched-text/templates/counter",
            "tags": "",
            "type": "",
            "text": "<span class=\"bimlas-counter\"> {{$:/temp/bimlas/highlight-searched-text/counter}} </span>"
        },
        "$:/plugins/bimlas/highlight-searched-text/templates/sidebar": {
            "title": "$:/plugins/bimlas/highlight-searched-text/templates/sidebar",
            "list-before": "$:/core/ui/SideBarSegments/search",
            "tags": "$:/tags/SideBarSegment",
            "type": "text/vnd.tiddlywiki",
            "text": "<div class=\"bimlas-highlight-searched-text bimlas-sidebar\">\n\t<!--\n\t\tIf emptyMessage were not specified, the height of the sibebar would be\n\t\tvariable (because find-in-page is either visible or not), so I will\n\t\tdisplay a placeholder if there is no search term.\n\t-->\n\t<$list filter=\"[{$:/config/bimlas/highlight-searched-text/search-tiddler}get[text]]\" emptyMessage=\"&nbsp;\">\n\t\tFind in page: {{$:/plugins/bimlas/highlight-searched-text/buttons/next-match}} {{$:/plugins/bimlas/highlight-searched-text/buttons/previous-match}} {{$:/plugins/bimlas/highlight-searched-text/templates/counter}}\n\t</$list>\n</div>\n"
        },
        "$:/plugins/bimlas/highlight-searched-text/templates/toolbar": {
            "title": "$:/plugins/bimlas/highlight-searched-text/templates/toolbar",
            "tags": "$:/tags/PageTemplate",
            "type": "text/vnd.tiddlywiki",
            "text": "\\define collapsed()\n    {{$:/plugins/bimlas/highlight-searched-text/buttons/show-toolbar}}\n\\end\n\n\\define expanded()\n        {{$:/plugins/bimlas/highlight-searched-text/buttons/hide-toolbar}}\n        <$keyboard key=\"enter\">\n            <$action-scroll-to-match $direction=\"next\"/>\n            <$edit-text tiddler={{$:/config/bimlas/highlight-searched-text/search-tiddler}} placeholder=\"Find in page...\" tag=\"input\" type=\"search\"/>\n        </$keyboard>\n        {{$:/plugins/bimlas/highlight-searched-text/templates/counter}}\n        {{$:/plugins/bimlas/highlight-searched-text/buttons/next-match}}\n        {{$:/plugins/bimlas/highlight-searched-text/buttons/previous-match}}\n        {{$:/plugins/bimlas/highlight-searched-text/buttons/clear-input}}\n\\end\n\n<$list filter=\"[[$:/config/bimlas/highlight-searched-text/toolbar-visibility]!contains:text[never]]\">\n    <div class=\"bimlas-highlight-searched-text bimlas-sticky-find-in-page\">\n        <$list filter=\"[[$:/state/bimlas/highlight-searched-text/toolbar]contains:text[show]]\" emptyMessage=<<collapsed>>>\n            <<expanded>>\n        </$list>\n    </div>\n</$list>\n"
        },
        "$:/plugins/bimlas/highlight-searched-text/update-highlighting.js": {
            "title": "$:/plugins/bimlas/highlight-searched-text/update-highlighting.js",
            "text": "/*\\\ntitle: $:/plugins/bimlas/highlight-searched-text/update-highlighting.js\ntype: application/javascript\nmodule-type: library\n\nUpdate highlight of searched text (find in page)\n\n\\*/\n\nvar\n\tMark = require(\"$:/plugins/bimlas/highlight-searched-text/mark.js\"),\n\tmarkInstance;\n\tpreviousSearchedText = '';\n\nmodule.exports = function(force = false, customSearchedText = null) {\n\tvar searchTiddler = $tw.wiki.getTiddlerText(\"$:/config/bimlas/highlight-searched-text/search-tiddler\");\n\tvar searchedText = customSearchedText !== null ? customSearchedText : $tw.wiki.getTiddlerText(searchTiddler);\n\tvar totalCounter = 0;\n\n\tif((searchedText === previousSearchedText) && !force) return false;\n\n\tif(!markInstance) markInstance = new Mark(document.getElementsByClassName(\"tc-story-river\")[0]);\n\tmarkInstance.unmark();\n\tif(searchedText !== \"\") markInstance.mark(searchedText, {\n\t\texclude: [\n\t\t\t\".tc-tiddler-edit-frame *\"\n\t\t],\n\t\tfilter: function(node, term, count) {\n\t\t\ttotalCounter = count + 1;\n\t\t\treturn true;\n\t\t}\n\t});\n\tsetCounterTiddler(totalCounter);\n\tpreviousSearchedText = searchedText;\n\treturn true;\n};\n\nfunction setCounterTiddler(totalCounter) {\n\tvar defaultFields = $tw.wiki.getCreationFields();\n\tvar tiddlerFields = {\n\t\ttitle: \"$:/temp/bimlas/highlight-searched-text/counter\",\n\t\ttext: \"(\" + totalCounter + \")\"\n\t};\n\t$tw.wiki.addTiddler(new $tw.Tiddler(tiddlerFields, defaultFields));\n}\n",
            "type": "application/javascript",
            "module-type": "library"
        }
    }
}